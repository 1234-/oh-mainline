{% extends 'base/base.html' %}
{% load base_extras %}
{% load i18n %}

{% block title %}Pick a username{% endblock %}

{% block body_id %}associate-openid{% endblock %}

{% block body_class %}{{ block.super }} {% endblock %}

{% block css %}
{{ block.super }}
body#associate-openid .errorlist li { width: 90%; }
#openid-associate { margin: 0 355px; width: 250px; }
#openid-associate .head { width: 250px; }
#openid-associate .body { width: 210px; }
#expand-second-form { margin-top: 20px; }
#associate-with-existing-account { margin-top: 10px; display: none; }
form p { float: none; display: block; margin: 0 0 10px 0; }
form label { float: none; display: block; }
body#associate-openid form input { float: none; display: block; }
body#associate-openid .body { background: #fff;} 
{% endblock css %}

{% block content %}
    <div class='module' id='openid-associate'>

        <div class='head'>
            <h3>Pick a hip username</h3>
        </div>

        <div class='body'>

            <form name="fregister" action="{% url user_register %}"
                    method="POST" class="login">
                <input type="hidden" name="next" value="{{ next|enhance_next_to_annotate_it_with_newuser_is_true}}" />
                {{ form1.as_p }}
                <p><input type="submit" name="bnewaccount" value="ok"></p>
            </form>
            
            <a href='#' id='expand-second-form' style='display: block; '>
                Or associate this OpenID with an existing account.
            </a>

            <form id='associate-with-existing-account' name="fverify" action="{% url user_register %}" method="POST" class='login '>
                {{ form2.non_field_errors }}
                <input type="hidden" name="next" value="{{ next }}" />
                {{ form2.as_p }}
                <p><input type="submit" name="bverify" value="Associate"></p>
            </form>
        </div>
    </div>
{% endblock content %}

{% block js %}
{{ block.super }}
<script type='text/javascript'>
$(function () {
$('#expand-second-form').click(function () { $('#associate-with-existing-account').show(); });
});
</script>
{% endblock js %}
