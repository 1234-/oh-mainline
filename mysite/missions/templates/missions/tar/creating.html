{% extends 'missions/tar/base.html' %}
{% comment %}
# This file is part of OpenHatch.
# Copyright (C) 2010 Jack Grigg
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU Affero General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU Affero General Public License for more details.
#
# You should have received a copy of the GNU Affero General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.
{% endcomment %}


{% block mission_main %}
<div class='submodule fat'>
  <div class='head'>
    <h3>Creating tarballs</h3>
  </div>
  <div class="body">
      <p>Now that you know how to unpack tarballs, we made another simple project so you can experiment with creating them.  It is called "myproject" and is at version 0.1, and it consists of {{ filenames_for_tarball|length }} file{{ filenames_for_tarball|length|pluralize }} which you can download here:</p>
      <ul>
        {% for filename in filenames_for_tarball %}
          <li><a href="{% url mysite.missions.tar.views.file_download name=filename %}">{{ filename }}</a></li>
        {% endfor %}
      </ul>

      <p></p>

      <p>Your mission is to:

      <ul class="raquo_bullets">
        <li>create a <code>myproject-0.1</code> directory (<abbr title="mkdir myproject-0.1">hover for hint</abbr>)</li>
        <li>download the files above and place them in the directory</li>
        <li>in the parent directory, create a gzipped tarball of the myproject-0.1 directory (<abbr
                title="tar zcvf myproject-0.1.tar.gz myproject-0.1">hover for hint</abbr>)</li>
        <li>upload your tarball</li>
      </ul>
      <p></p>

      <form method="post" enctype="multipart/form-data" action="{% url mysite.missions.tar.views.upload %}#create-form">
        <div class="form-row">
          <a name="create-form"></a>
          After you make the tarball, upload it here:
    {% if create_success %}
      <!-- create status: success -->
      <div class="successmsg">
        <p><strong>You have successfully completed this part of the mission.</strong></p>
        <p>The file you uploaded passed all of our checks.</p>
      </div>
    {% else %}
      <!-- create status: failure -->
    {% endif %}
          {% if what_was_wrong_with_the_tarball %}
          <ul class="errorlist"><li>{{ what_was_wrong_with_the_tarball }}</li></ul>
          {% endif %}
          {{ create_form.tarfile.errors }}
          <br style="clear: left;" />
          {{ create_form.tarfile }}
          <input type="submit" value="Upload" style="float: none;" />
          {% if not create_success and create_done %}
          <br style="clear: left;" />
          <em>You have already completed this part of the mission.</em>
          {% endif %}
        </div>
      </form>
      {% if create_done and unpack_done %}
      <p class="next_mission_link">
	Congratulations! You've totally completed the tar mission.
	Want to go <a href="{% url mysite.missions.base.views.main_page %}">back to the list of missions</a>?</p>
      {% endif %}
      

  </div>
</div>
{% endblock mission_main %}
