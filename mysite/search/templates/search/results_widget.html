<style type='text/css'>.active_facet_value
  {background-color: #dfd; padding: 0 2px; }</style>

<div class='search-result-control' id='results-widget'>
    <span id='results-summary'>

        {% if bunch_of_bugs %}
            Showing 
            <span id='results-summary-start'>{{ start }}</span> to
            <span id='results-summary-end'>{{ end }}</span> of 
            {{ total_bug_count }} bugs
        {% else %}
            {% if query.terms or query.active_facet_options %}

                {% ifnotequal start 1 %}
                    No bugs on this page
                {% else %}
                    <strong>No bugs found</strong>
                {% endifnotequal %}

                {% else %}
                <!-- No search query -->
            {% endif %}
        {% endif %}

        {% if query.terms %}
        matching
        <strong id='results-summary-language'>{{ query.terms_string }}</strong>{% if not query.active_facet_options %}.{% endif %}
        {% endif %}

        {% comment %} FIXME Use django filter to remove whitespace {% endcomment %}
        {% spaceless %}
            {% if query.active_facet_options %}
                {% for facet, value in query.active_facet_options.items reversed %}
                    <span class='active_facet_value'>
                        {% ifequal facet "language" %}
                        whose main project language is
                        {% endifequal %}
                        {% ifequal facet "toughness" %}
                        whose toughness is
                        {% endifequal %}
                        {% ifequal facet "contribution_type" %}
                        which need
                        {% endifequal %}
                        <strong>{{ value }}</strong>&nbsp;<a href='?{% ifequal facet "language" %}{{ facet2any_query_string.language }}{% endifequal %}{% ifequal facet "toughness"%}{{ facet2any_query_string.toughness }}{% endifequal %}{% ifequal facet "contribution_type"%}{{ facet2any_query_string.contribution_type }}{% endifequal %}'>[x]</a>
                    </span>
                    {% if forloop.last %}
                        .
                    {% else %}
                        and
                    {% endif %}
                {% endfor %}
            {% endif %}
        {% endspaceless %}

    </span>

    {% if show_prev_page_link or show_next_page_link %}
    <span class='separator'>&nbsp;</span>

    <span id='navigation'>
        {% if show_prev_page_link %}
        <a href='{{ prev_page_url }}' id='prev-page'>&laquo; Prev</a>
        <span class='separator'>&nbsp;</span>
        {% endif %}

        {% if show_next_page_link %}
        <a href='{{ next_page_url }}' id='next-page'>Next&nbsp;page &raquo;</a>
        {% endif %}
    </span>
    {% endif %}

    <div id='expand-collapse-all'>
        <a href='#' id='expand-all-link'><img src='/static/images/icons/zoom-in.png' />Expand all</a>
        <a href='#' id='collapse-all-link'><img src='/static/images/icons/zoom-out.png' />Collapse all</a>
    </div>

</div><!-- /#results-widget -->
{# vim: set filetype=htmldjango: #}
