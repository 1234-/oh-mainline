<div class='results-widget'>
    <span id='results-summary'>

        {% if bunch_of_bugs %}
            Showing 
            <span id='results-summary-start'>{{ start }}</span> to
            <span id='results-summary-end'>{{ end }}</span> of 
            {{ total_bug_count }} bugs
        {% else %}
            {% if query.terms or query.active_facet_options %}

                {% ifnotequal start 1 %}
                    No bugs on this page
                {% else %}
                    <strong>No bugs found</strong>
                {% endifnotequal %}

                {% else %}
                <!-- No search query -->
            {% endif %}
        {% endif %}

        {% if query.terms %}
        matching
        <strong id='results-summary-language'>{{ query.terms_string }}</strong>{% if not query.active_facet_options %}.{% endif %}
        {% endif %}

        {% comment %} FIXME Use django filter to remove whitespace {% endcomment %}
        {% spaceless %}
            {% if query.active_facet_options %}
                {% for facet, value in query.active_facet_options.items %}
                    {% if not forloop.first and forloop.last %}
                        {% ifnotequal forloop.counter0 1 %}
                            and
                        {% endifnotequal %}
                    {% endif %}
                    <span class='active_facet_value'>
                        {% ifequal facet "language" %}
                        whose main project language is
                        {% endifequal %}
                        {% ifequal facet "project" %}
                        in 
                        {% endifequal %}
                        {% ifequal facet "toughness" %}
                        whose toughness is
                        {% endifequal %}
                        {% ifequal facet "contribution_type" %}
                        which need
                        {% endifequal %}
                        {% spaceless %}
                        <strong>{{ value }}</strong>
                        <span>&nbsp;</span><a rel='tipsy-south' title='Remove {{ facet }} filter' href='?{% ifequal facet "language" %}{{ facet2any_query_string.language }}{% endifequal %}{% ifequal facet "toughness"%}{{ facet2any_query_string.toughness }}{% endifequal %}{% ifequal facet "contribution_type"%}{{ facet2any_query_string.contribution_type }}{% endifequal %}'>[x]</a>
                        {% endspaceless %}
                    </span>
                    {% if forloop.last %}
                        .
                    {% endif %}
                {% endfor %}
            {% endif %}
        {% endspaceless %}

    </span>


    <span id='expand-collapse-all'>
        <a href='#' id='expand-all-link'><img src='/static/images/icons/zoom-in.png' />Expand all</a>
        <a href='#' id='collapse-all-link'><img src='/static/images/icons/zoom-out.png' />Collapse all</a>
    </span>

    {% include 'search/navigation.html' %}

</div><!-- /.results-widget -->
{# vim: set filetype=htmldjango: #}
