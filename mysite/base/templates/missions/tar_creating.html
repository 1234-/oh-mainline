{% extends 'missions/tar_base.html' %}

{% block body_class %}{{ block.super }} auth settings{% endblock %}

{% block mission_main %}
<div class='submodule fat'>
  <div class='head'>
    <h3>Creating tarballs</h3>
  </div>
  <div class="body">
      <p>Now that you know how to unpack tarballs, we made another simple project so you can experiment with creating them.  It is called "myproject" and is at version 0.1, and it consists of {{ filenames_for_tarball|length }} file{{ filenames_for_tarball|length|pluralize }} which you can download here:</p>
      <ul>
        {% for filename in filenames_for_tarball %}
          <li><a href="{% url mysite.missions.views.tar_file_download name=filename %}">{{ filename }}</a></li>
        {% endfor %}
      </ul>
      <p></p>
      <p>Your mission is to take those files and give us back a gzipped tarball of them.  Tar archives are not compressed by default; compressing them generally saves significantly on file size, and you can easily have the tar program deal with the compression for you.  Since it's version 0.1 of the "myproject" project, we expect the files to appear in a directory called "myproject-0.1" when the tarball is unpacked.</p>
      <form method="post" enctype="multipart/form-data" action="{% url mysite.missions.views.tar_upload %}#create-form">
        <div class="form-row">
          <a name="create-form"></a>
          After you make the tarball, upload it here:
    {% if create_success %}
      <!-- create status: success -->
      <div class="successmsg">
        <p><strong>You have successfully completed this part of the mission.</strong></p>
        <p>The file you uploaded passed all of our checks.</p>
      </div>
    {% else %}
      <!-- create status: failure -->
    {% endif %}
          {% if what_was_wrong_with_the_tarball %}
          <ul class="errorlist"><li>{{ what_was_wrong_with_the_tarball }}</li></ul>
          {% endif %}
          {{ create_form.tarfile.errors }}
          <br style="clear: left;" />
          {{ create_form.tarfile }}
          <input type="submit" value="Upload" style="float: none;" />
          {% if not create_success and create_done %}
          <br style="clear: left;" />
          <em>You have already completed this part of the mission.</em>
          {% endif %}
        </div>
      </form>
      {% if create_done and unpack_done %}
      <p style="text-align: right;">
	Congratulations! You've totally completed the tar mission.
	Want to go <a href="{% url mysite.missions.views.main_page %}">back to the list of missions</a>?</p>
      {% endif %}
      

  </div>
</div>
{% endblock mission_main %}

