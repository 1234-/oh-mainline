{% extends 'base/two_columns_fat_skinny.html' %}
{% load base_extras %}
{% load profile_extras %}

{% block title %}
Home
{% endblock title %}

{% block css %}
{{ block.super }}
@import url('/static/css/base/landing.css');
#main { margin-right: 20px; }
#left { margin-right: 0; }
{% endblock css %}

{% block pagetop %}

<h1>Welcome, 
    <a href='{% url mysite.profile.views.display_person_web the_user.username %}'
        >{% firstof the_user.first_name the_user.username %}</a>!
</h1>

{% endblock pagetop %}

{% block main %}

<div class='module' id='bugs'>
    <div class='head'>
        <h3>Recommended bugs</h3>
    </div>
    <div class='body'>
        {% if recommended_bugs %}
        <p>Based on the projects you've worked on
        and the languages you know, we recommend
        you check out these bugs.</p>
        <ul>
            {% for bug in recommended_bugs %}
            <li style="list-style-image: url('{{ bug.project.get_url_of_search_result_icon_or_generic }}');">
            <span>
                <a style='font-weight: bold;'
                    href='{{ bug.canonical_bug_link }}'>
                    {{ bug.title }}</a>
                in&nbsp;{{ bug.project.name }}
                {% if bug.project.language %}
                (in&nbsp;{{ bug.project.language }})
                {% endif %}
            </span></li>
            {% endfor %}
        </ul>
        <p><a href='/search/' style='float: right;'>Find more opportunities <strong>&raquo;</strong></a></p>
        {% else %}
        To receive recommendations, start your profile:
        <ul>
            <li>
            <a href='{% url mysite.profile.views.portfolio_editor %}'>Add projects</a></ul>
            </li>
            <li>
            <a href='{% url mysite.profile.views.edit_info %}'>Tell us a little bit about you</a></ul>
            </li>
        {% endif %}
    </div>
</div>

<div class='module' id='people'>
    <div class='head'>
        <h3>Collaborators</h3>
    </div>
    <div class='body'>
        {% for person in the_user.get_profile.get_collaborators_for_landing_page %}
        <li><a href=''>{{ person.get_full_name_or_username }}</a></li>
        {% endfor %}
    </div>
</div>

<div class='module'>
    <div class='head'>
        <h3>Your widget</h3>
    </div>
    <div class='body contains-submodules'>
        <div class='submodule' style='width: 50%; margin-right: 20px;'>
            <div class='body' style='width: 85%;'>
                <p>Showcase your open source participation on your web things.</p>
                <div id='widget-instructions'>
                    Include this tag wherever in your page you want to put the widget:
                    <xmp style='white-space: normal;'><script type='text/javascript' src='http://openhatch.org/people/{{ the_user.username }}/openhatch-widget.js'></script></xmp>
                </div>
            </div>
        </div>
        <div class='submodule widget-wrapper' style='width: 40%; border: 0; background: none;'>
            <script type='text/javascript' src='{% url mysite.profile.views.widget_display_js the_user.username %}'></script>
        </div>
    </div>
</div>

{% endblock main %}

{% block left %}
<div class='module' id='meta'>
    <div class='head'>
        <h3>
            <a style='color: inherit;' href='/blog/'>
                OpenHatch news
            </a>
        </h3> 
        <a class='blog-feed' title='RSS feed' href='/blog/feed/'>
            <span class='alt-text'>RSS feed</span>
        </a>
    </div>
    <div class='body'>
        <ul>
            {% for entry in entries %}
            <li>
            <a style='font-weight: bold;' href="{{ entry.link }}">{{ entry.title }}</a>
            <div class='byline'>by {{ entry.author }} &bull; {{ entry.published_parsed|timesince_terse }} ago</div>
            <div class="entry">
                {{ entry.unicode_text|truncatewords:15 }}
            </div>
            </li>
            {% endfor %}
        </ul>
        <a style='float: right;' href='/blog/'>Get the whole blog &raquo;</a>
    </div>
</div>
{% endblock left %}
