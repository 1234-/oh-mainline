{% extends 'base/base.html' %}
{% load base_extras %}
{% load profile_extras %}

{% block title %}
Home
{% endblock title %}

{% block body_id %}landing{% endblock body_id %}

{% block css %}
{{ block.super }}
body#landing .column { float: left; width: 32%; margin-right: 0; margin-left: 2%; }
body#landing .column:first-child { margin-left: 0; }
body#landing .module .body { background: #fff; padding: 3%; width: 94%; }
body#landing .module .head { width: 94%; }
body#landing .module { width: 100%; }
{% endblock css %}

{% block content %}

<div id='left' class='column'>
{% with the_user.get_profile.get_collaborators_for_landing_page as collaborators %}
<div class='module' id='people'>
    <div class='head'>
        {% if collaborators %}
        <h3>Collaborators</h3>
        {% else %}
        <h3>Five random profiles</h3>
        {% endif %}
    </div>
    <div class='body'>
        <ul id='people-list'>
            {% if collaborators %}
                {% for person in collaborators %}
                    {% include 'profile/person-summary-li.html' %}
                {% endfor %}
            {% else %}
                {% for person in random_profiles %}
                    {% include 'profile/person-summary-li.html' %}
                {% endfor %}
            {% endif %}
        </ul>
    </div>
</div>
{% endwith %}
</div>

<div id='middle' class='column'>

    <div class='module' id='todo'>
        <div class='head'>
            <h3>Things to do around here</h3>
        </div>
        <div class='body'>
            <ul class='nudgebuttons'>
                <li>Create a profile</li>
                <li>Save some bugs</li>
                <li>Find similar people</li>
                <li>Find nearby people</li>
                <li>Find a mentor</li>

                (logged-in users see:)
                <li>Add projects (list your open source contributions)</li>
                    and we'll find interesting people and projects to check out
                <li>Add interests</li>
                    and we'll recommend cool things to do
                <li>Add a location</li>
                    and find FLOSS supporters near you
            </ul>
        </div>
    </div>

    <div class='module' id='bugs'>
        <div class='head'>
            <h3>Recommended bugs</h3>
        </div>
        <div class='body'>
            {% if recommended_bugs %}
            <p>Based on the projects you've worked on
            and the languages you know, we recommend
            you check out these bugs.</p>
            <ul>
                {% for bug in recommended_bugs %}
                <li style="list-style-image: url('{{ bug.project.get_url_of_search_result_icon_or_generic }}');">
                <span>
                    <a style='font-weight: bold;'
                        href='{{ bug.canonical_bug_link }}'>
                        {{ bug.title }}</a>
                    in&nbsp;{{ bug.project.name }}
                    {% if bug.project.language %}
                    (project&nbsp;language:&nbsp;{{ bug.project.language }})
                    {% endif %}
                </span></li>
                {% endfor %}
            </ul>
            <p><a href='/search/' style='float: right;'>Find more opportunities <strong>&raquo;</strong></a></p>
            {% else %}
            To receive recommendations, start your profile:
            <ul>
                <li>
                    <a href='{% url mysite.profile.views.portfolio_editor %}'>Add projects</a>
                </li>
                <li>
                    <a href='{% url mysite.profile.views.edit_info %}'>
                        Tell us a little bit about you
                    </a>
                </li>
            </ul>
            {% endif %}
        </div>
    </div>
</div>

<div id='right' class='column'>

    <div class='module' id='meta'>
        <div class='head'>
            <h3>
                <a style='color: inherit;' href='/blog/'>
                    OpenHatch news
                </a>
            </h3> 
            <a class='blog-feed' title='RSS feed' href='/blog/feed/'>
                <span class='alt-text'>RSS feed</span>
            </a>
        </div>
        <div class='body'>
            <ul>
                {% for entry in entries %}
                <li>
                <a style='font-weight: bold;' href="{{ entry.link }}">{{ entry.title }}</a>
                <div class='byline'>by {{ entry.author }} &bull; {{ entry.published_parsed|timesince_terse }} ago</div>
                <div class="entry">
                    {{ entry.unicode_text|truncatewords:15 }}
                </div>
                </li>
                {% endfor %}
            </ul>
            <a style='float: right;' href='/blog/'>Get the whole blog &raquo;</a>
        </div>
    </div>

    <div class='module'>
        <div class='head'>
            <h3><a href='/account/settings/widget/'>Widgetize yourself &rarr;</a></h3>
        </div>
    </div>

</div>
{% endblock content %}
