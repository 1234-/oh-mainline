{% extends 'base/base.html' %}

{% load i18n %}

{% block title %}
Welcome to OpenHatch!
{% endblock title %}

{% block nav %}
{% endblock nav %}

{% block js_in_head %}
<script>
    /*<![CDATA[*/
    // FIXME: Wrap this in an IE-only block.
    // Allow IE to recognize HTML5 elements
    html5tags = ['section', 'article', 'aside', 'footer', 'header', 'nav', 'time'];
    t = html5tags.length; while (t-- > 0) { document.createElement(html5tags[t]); }
    /*]]>*/
</script>
<script src="/static/js/jquery.js"></script>
<script src="/static/openid/js/openid-jquery.js"></script>
<script>
$(function() {
    openid.init('id_openid_url');
});
</script>
<script src='/static/js/css_if_js.js'></script>
{% endblock js_in_head %}

{% block css %}
{{ block.super }}
@import url('/static/css/base/homepage.css') all;
@import url('/static/openid/css/openid.css') all;
{% endblock css %}

{% block content %}
<div id='banner'>
    <img alt='OpenHatch' src='/static/images/the-logo.png' width='300'/>
</div>

<div id='entry-points'>
    <div class='module' id='explanation'>
        <h4>Hm?</h4>
        <h3>Want to put your knowledge to work in open source?
            Proud of what you've already contributed?</h3>
        <ul>
            <li>
            <strong>
                <a href='/search/'>
                    &rarr;
                    <span>Volunteer opportunities</span>
                </a>
            </strong> 
            <p>Whether you're a newcomer or an old hat, discover new ways that you
            can help free software and open source projects.
            </p>
            </li>
            <li>
            <strong>
                <a href='#'>
                    &rarr;
                    <span>Create a profile</span>
                </a>
            </strong>
            <p>Track and show off your involvement in free and open source software. 
            We'll find your VCS commits, and you can add other contributions: 
            patches, bug activity, and design ideas.
            </p>
            </li>
            <li>
            <strong>
                <a href='/people/'>
                    &rarr;
                    Find collaborators and connections
                </a>
            </strong>
            <p>Check out the list of other folks on OpenHatch.</p></li>
        </ul>
    </div>
    <div id='account-related'>
        <ul class='tab-links' class='visible_iff_js'>
            <li class='learn-more'>
            <a href="#learn_more"
                {% ifnotequal initial_tab_open 'about' %}
                class='my-tab-is-hidden'
                {% endifnotequal %}
                tab_selector="#learn-more">
                <img src='/static/images/base/hm.png' alt='Hm?' />
            </a>
            </li>
            <li>
            <a href="#request_invitation"
                {% ifnotequal initial_tab_open 'request_invitation' %}
                class='my-tab-is-hidden'
                {% endifnotequal %}
                tab_selector="#request_invitation">
                <img src='/static/images/base/request-an-invitation.png'
                alt='Request an invitation' />
            </a>
            </li>
            {% comment %}
            <li><a href="#create_profile" class='visible_iff_js'
                tab_selector="#create_profile">Sign up</a></li>
            {% endcomment %}
            <li>
            <a href="#login"
                {% ifnotequal initial_tab_open 'login' %}
                class='my-tab-is-hidden'
                {% endifnotequal %}
                tab_selector="#login">
                <img src='/static/images/base/sign-in.png'
                alt='Sign in' />
            </a>
            </li>
        </ul>
        <div id='tabs' class='module'>
            <h3 class='invisible_if_js'>Request an invitation</h3>
            <div id='request_invitation' 
                {% ifequal initial_tab_open 'request_invitation' %}
                class='tab'
                {% else %}
                class='tab invisible_if_js'
                {% endifequal %}
                >
                <form name='request_invitation' method='POST'
                    action='{% url mysite.account.views.request_invitation %}'>
                    {% if invitation_success %}
                    <div class='form-row' style='color: green; font-weight: bold; margin-bottom: 10px;'>
                        Success! An invitation has been requested for {{ invitation_requested_for }}.
                    </div>
                    {% endif %}
                    {% for field in invitation_request_form %}
                    <div class='form-row'>
                        {% if field.errors %}
                        <div class='field-errors'>
                            {{ field.errors }}
                        </div>
                        {% endif %}
                        {{ field.label_tag }}
                        {{ field }}
                    </div>
                    {% endfor %}
                    <div class='form-row'>
                        <input type='submit' style='float: right;' 
                        value='Begin!' />
                    </div>
                </form>
            </div>
            {% comment %}
            <h3 class='invisible_if_js'>Sign up</h3>
            <div id='create_profile' class='tab'>
                {% if signup_notification %}
                <div class='notification'>
                    {{ signup_notification }}
                </div>
                {% endif %}
                {% if notification_id %}
                <!-- notification_id: {{ notification_id }} -->
                {% endif %}
                <form id='create_profile' name='create_profile'
                    action='/account/signup/do' method='POST'>
                    {% for field in signup_form %}
                    {% ifnotequal field.html_name "password2" %}
                    <div class='form-row'>
                        {% if field.errors %}
                        <div class='field-errors'>
                            {{ field.errors }}
                        </div>
                        {% endif %}
                        {{ field.label_tag }}
                        {{ field }}
                    </div>
                    {% endifnotequal %}
                    {% endfor %}
                    <div class='form-row'>
                        <input type='submit' style='float: right;' 
                        value='begin!' />
                    </div>
                </form>
            </div>
            {% endcomment %}
            <h3 class='invisible_if_js'>Log in</h3>
            <div id='login' 
                {% ifequal initial_tab_open 'request_invitation' %}
                class='tab'
                {% else %}
                class='tab invisible_if_js'
                {% endifequal %}
                >
                {% if login_notification %}
                <div class='notification'>
                    {{ login_notification }}
                </div>
                {% endif %}
                {% if notification_id %}
                <!-- notification_id: {{ notification_id }} -->
                {% endif %}
                <form id='login' name='login'
                    action='/account/login/do' method='POST'>
                    <div class='form-row'>
                        <label for='login_username'>Username</label>
                        <input type='text' id='login_username' name='login_username' />
                    </div>
                    <div class='form-row'>
                        <label for='login_password'>Password</label>
                        <input type='password' id='login_password' name='login_password' />
                    </div>
                    <div class='form-row'>
                        <input type='submit' value='log in!' style='' />
                    </div>
                </form>
                <form id="openid_form" name="openid_form"
                    action="{% url user_signin %}" method="post">
                    <input type="hidden" name="action" value="verify" />
                    <input type="hidden" name="next" value="{{ next }}" />
                    <fieldset>
                        <legend>{% trans "Sign in with your OpenID URL" %}</legend>
                        <div id="openid_choice">
                            <p>Please click your account provider:</p>
                            <div id="openid_btns"></div>
                        </div>
                        <div id="openid_input_area">
                            <label for="id_openid_ul">
                                {% trans "OpenId URL :" %}
                            </label>
                            {{ openid_signin_form.openid_url }}
                            <input name="openid_submit" type="submit"
                            value="{% trans "Sign in with OpenID" %}">
                        </div>
                    </fieldset>
                </form>
            </div> 
        </div>
    </div>
</div>
{% endblock content %}

{% block js %}
<script src='/static/js/homepage.js'></script>
{% endblock js %}
