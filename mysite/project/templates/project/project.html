{% extends 'base/two_columns.html' %}

{% block title %}
Projects - {{ project.name }} 
{% endblock title %}

{% block body_id %}project{% endblock body_id %}

{% block description_for_anonymous_users %}
<strong>Learn below</strong>
about our members who support {{ project.name }}
{% endblock %}

{% block pagetop %}

    <h3 class='supertitle'><a href='{% url mysite.project.views.projects %}'>Projects</a></h3>
    <h1>{{ project.name }}</h1>

{% endblock pagetop %}

{% block left %}
    <div class='module contains_questions'>
        <div class='head'>
            <h3>Discuss {{ project.name }}</h3>
        </div>
        <div class='body'>
            <ul id='paragraph_questions' class='questions'>
                {% for question, answers in question_answer_mappings_non_bug %}
                    <li>
                        <style type="text/css">
                        </style>
                        <h3><strong>Q:</strong>
                            {% ifequal question.key_string 'non_code_participation' %}
                                Other than writing code, how can people participate
                                in {{ project.name }}?
                            {% endifequal %}

                            {% ifequal question.key_string 'where_to_start' %}
                                I'm interested in getting involved in
                                {{ project.name }}. Where do I start?
                            {% endifequal %}
                        </h3>
                        <ul class='answers'>
                            {% for answer in answers %}
                                <li>
                                    {% ifequal the_user answer.author %}
                                        {# deletion form #}
                                        <form name='' method='post' action='{% url mysite.project.views.delete_paragraph_answer_do %}' class='delete'>
                                            <input type="hidden" name="answer__pk" value="{{answer.pk}}" />
                                            <input type="submit" value="X" />
                                        </form>
                                    {% endifequal %}
                                    {{ answer.text|urlize }}
                                    <br/>
                                    <small>&nbsp;&nbsp;&nbsp;&mdash; <a style='font-weight: bold;' href='{{ answer.author.get_profile.get_profile_url }}'>{{ answer.author.get_profile.get_full_name_or_username }}</a></small></li>
                            {% endfor  %}
                            <li>
                            {% if the_user.is_authenticated %}

                                <form class="answer_question" name='question-short-{{question.pk}}' method='post' action='{% url mysite.project.views.create_answer_do %}'>
                                    <input type="hidden" name="question__pk"
                                            value="{{question.pk}}" />
                                    <input type="hidden" name="project__pk"
                                            value="{{project.pk}}" />
                                    <textarea class='add_an_answer'
                                            id='answer-question{{ forloop.counter0 }}'
                                            title='Add an answer'
                                            name='answer__text'></textarea>
                                    <div class='show_when_editing'>
                                        <div class='input-note'>
                                            {% ifequal question.key_string 'non_code_participation' %}
                                                <ul class='sections'>
                                                    <li>
                                                        <p>
                                                            <strong>Tip</strong>:
                                                        </p>
                                                        <p>
                                                            Discuss documentation,
                                                            testing, webmastering,
                                                            and/or publicity.
                                                        </p>
                                                        <p>Include URLs if relevant (we'll
                                                            automatically linkify them). </p>
                                                    </li>
                                                    <li>
                                                        <p>
                                                            <strong>Example</strong>:
                                                        </p>
                                                        <p class='example'>
                                                            We need people to download version
                                                            0.4.5 and make sure the frobulator
                                                            still frobulates correctly.
                                                        </p>
                                                    </li>
                                                </ul>
                                            {% endifequal %}

                                            {% ifequal question.key_string 'where_to_start' %}
                                                <ul class='sections'>
                                                    <li>
                                                        <p>
                                                            <strong>Tip</strong>:
                                                        </p>
                                                        <p>
                                                            Talk about diverse
                                                            kinds of contributions.
                                                            Include URLs if
                                                            relevant (we'll
                                                            automatically linkify
                                                            them).
                                                        </p>
                                                    </li>
                                                    <li>
                                                        <p>
                                                            <strong>Examples</strong>:
                                                        </p>
                                                        <p class='example'>
                                                            Drop me a line at
                                                            &lt;hello@example.com&gt;
                                                            if you want to get
                                                            involved.
                                                        </p>
                                                        <p class='example'>
                                                            Visit our welcome page
                                                            (example.com/hi) to learn
                                                            about our mailing
                                                            lists, forums, irc
                                                            channel, and planet.
                                                        </p>
                                                    </li>

                                                </ul>
                                            {% endifequal %}
                                        </div>
                                        <input type='submit' value='Submit'>
                                    </div><!-- /.show_when_editing -->
                                </form>
                                {% else %}
                                {# if they aren't logged in#}
                                <a href="{% url oh_login %}?next={{ project.get_url }}" style="">Log in to add an answer</a>
                                {% endif %}
                                </li>
                            </ul>
                            </li>
                            {% endfor %}
                        </ul>
        <ul id='bug_questions' class='questions'>
            {% for question, bug_answers in question_answer_mappings_bug %}
            <li>
            <ul class='answers'>
                {% ifequal question.key_string 'stress' %}
                    <h3>
                        <strong>Q:</strong>
                        What is a bug or issue with {{ project.name }} that
                        you've been putting off that is stressing you out?
                    </h3>
                {% endifequal %}
                {% ifequal question.key_string 'newcomers' %}
                    <h3>
                        <strong>Q:</strong>
                        What is a good issue for a newcomer to start out with?
                    </h3>
                {% endifequal %}

                {% for bug_answer in bug_answers %}
                <li><div class="bug_answer_title">
                        {% ifequal the_user bug_answer.author %}
                        <form name='' method='post' action='{% url mysite.project.views.delete_bug_answer_do %}' class='delete'>
                            <input type="hidden" name="answer__pk" value="{{bug_answer.pk}}" />
                            <input type="submit" value="X" />
                        </form>
                        {% endifequal %}
                    <strong>{{bug_answer.title}}</strong>
                </div>
                {{bug_answer.details|urlize}}
                <br/>
                <small>&nbsp;&nbsp;&nbsp;&mdash; <a style='font-weight: bold;' href='{{ bug_answer.author.get_profile.get_profile_url }}'>{{ bug_answer.author.get_profile.get_full_name_or_username }}</a></small></li>
                {% endfor  %}
                <li>
                    <form class="answer_question" name='question-long-{{question.pk}}' method='POST'
                            action='{% url mysite.project.views.create_bug_answer_do %}'>
                        <input type='hidden' name='project__pk' value='{{ project.pk }}'>
                        <input type='hidden' name='question__pk' value='{{ question.pk }}'>
                        <div class="show_when_editing">
                            <label for='q{{ question.pk }}-bug__title'>
                                Describe an issue</label>
                        </div>
                        <input type='text' name='bug__title' title='Describe an issue' 
                                id='q{{ question.pk }}-bug__title' 
                                class='add_an_answer' />
                        <div class="show_when_editing">
                            {% ifequal question.key_string 'stress' %}
                                <label for='q{{ question.pk }}-bug__details'>
                                    What makes this issue stressful?</label>
                            {% endifequal %}
                            {% ifequal question.key_string 'newcomers' %}
                                <label for='q{{ question.pk }}-bug__details'>
                                    Further info</label>
                            {% endifequal %}
                            <textarea id='q{{ question.pk }}-bug__details' 
                                    name='bug__details'></textarea>
                            <div class='input-note'>
                                {% ifequal question.key_string 'stress' %}
                                    <ul class='sections'>
                                        <li>
                                            <p>
                                                <strong>Examples</strong>:
                                            </p>
                                            <p class='example'>
                                                I don't know how to get started with
                                                internationalizing my app.
                                            </p>
                                            <p class='example'>
                                                Bug 392 about printing was filed five
                                                years ago, and I don't even know if
                                                printing still works.
                                            </p>
                                            <p class='example'>
                                                I want help from a C coder writing a
                                                Maildir patch for Alpine.
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                <strong>Note</strong>:
                                            </p>
                                            <p>
                                                If this issue was formally
                                                filed on the web, be sure to
                                                include the URL.
                                            </p>
                                        </li>
                                    </ul>
                                {% endifequal %}

                                {% ifequal question.key_string 'newcomers' %}
                                    <ul class='sections'>
                                        <li>
                                            <p>
                                                <strong>Tip</strong>:
                                            </p>
                                            <p>
                                                Many projects have
                                                good small tasks that can teach newcomers
                                                how the project works. Now's your chance to
                                                share one of them!
                                            </p>
                                            <p>
                                                Include URLs if relevant (we'll
                                                automatically linkify them). </p>
                                        </li>
                                        <li>
                                            <p>
                                                <strong>Example</strong>:
                                            </p>
                                            <p class='example'>
                                                Someone could improve the
                                                photo upload dialog box so that it lets
                                                you resize the photo before sending it
                                                to the web.
                                            </p>
                                        </li>
                                    </ul>
                                {% endifequal %}
                            </div>

                            <input type='submit' value='Submit'>
                        </div>
                </form>
                </li>

            </ul>
        </li>
    {% endfor %}
</ul>
    </div>
</div><!-- /.module #requests -->

{% endblock left %}

{% block main %}
    <div class='module' id='bugs'>
        <div class='head'>
            <h3>Relatedly</h3>
        </div>
        <div class='body'>
            {% if project.get_open_bugs %}
                <p>
                    Browse {{ project.get_open_bugs|length }}+
                    <a href='/search/?q={{ project.name_with_quotes_if_necessary|urlencode }}'>
                        volunteer opportunit{{ project.get_open_bugs|pluralize:"y,ies"}}
                        matching
                        <strong>{{ project.name }}</strong>.
                    </a>
            {% else %}
                No volunteer opportunities in {{project.name}} indexed here yet. 
                <a href='/wiki/Bug_trackers'>
                    To add a bug tracker, 
                    visit our wiki</a>.

            </p>
        {% endif %}
      
      {% with mentors as mentors %}
      {% with project.name as topic %}
      {% with 0 as explain_language %}
      {% include 'project/mentor_summary.html' %}
      {% endwith %}
      {% endwith %}
      {% endwith %}

      {% if project.language %}
      {% with language_mentors as mentors %}
      {% with project.language as topic %}
      {% with 1 as explain_language %}
      {% include 'project/mentor_summary.html' %}
      {% endwith %}
      {% endwith %}
      {% endwith %}
      {% endif %}

    </div>
</div><!-- /.module #bugs -->

<div class='module' id='contributors'>
    <div class='head'>
        <h3>Registered contributors ({% firstof project.cached_contributor_count "none yet" %})</h3>
            <ul>
                <li>
                <a href='{% url mysite.profile.views.people %}?q=project:"{{project.name|urlencode}}"' style='float: right; font-weight: normal;'>See all <strong>&raquo;</strong></a>
                </li>
            </ul>
    </div>
    <div class='body'>
        <ul id='people-list'>
            {% for person in contributors %}
                {% include 'profile/person-summary-li.html' %}
            {% empty %}
                No registered contributors yet.  
            {% endfor %}
        </ul>
        <div style='width: 100%; float: left; text-align: right; margin-top: 20px; font-size: 8pt;'>
        To be listed here,
            <a href='{% url mysite.profile.views.portfolio_editor %}'>
                add {{ project.name }} to your
                profile</a>.
        </div>
    </div>
</div>

{% endblock main %}

{% block js %}
    <script type='text/javascript'>
        $(function() {
            $('.add_an_answer')
                .focus(function() {
                    $form = $(this).parent();
                    $form.addClass('active');
                    $form.find('input:text, textarea').unbind('blur');
                });

            $('input:text, textarea').hint();
            // Bind a function to the 'x' on input forms.  this function collapses the form
            $('.collapse_answer_form').click(function(){
                $form = $(this).parent().parent();
                $form.removeClass('active');
                $form.find('input:text, textarea').hint();
                return false;
            });

        })
    </script>

{% endblock js %}

{% comment %}
vim: set ai et ts=4 sw=4 nu:
{% endcomment %}

