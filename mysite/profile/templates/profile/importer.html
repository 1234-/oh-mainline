{% extends 'base/one_column.html' %}

{% block title %}
Portfolio editor
{% endblock title %}

{% block css %}
{{ block.super }}
@import url('/static/css/profile/editor.css');
@import url('/static/css/qunit.css');
@import url('/static/css/base/jquery.jgrowl.css');
@import url('/static/css/jquery-ui-lightness/jquery-ui-1.7.2.custom.css');
{% endblock css %}

{% block main %}
{% with 1 as edit_mode %}
<div id='portfolio' class='module editor'>
    <div class='head'>
        <h3>Portfolio editor</h3>
        <ul>
            <li>
            <a href='/people/{{ the_user.username }}'>
                &laquo; Back to portfolio
            </a>
            </li>
        </ul>
    </div>
    <div class='howto submodule' style='display: none;'>
        <div class='head'>
            <h3>
                How to use this
                <a class='hide-link' href='#'>Hide this</a>
            </h3>
        </div>
        <div class='body'>
            <ol>
                <li class='handle'>
                <h4>What's your handle?</h4>
                Enter some usernames and
                email addresses you've used
                in free software / open source.
                </li>
                <li class='hangout'>
                <h4>Where do you hang out?</h4>
                <p>Specify where you've used the username/email.</p>
                <p>&ldquo;All repositories&rdquo; &rarr; Automatically
                scan <!-- <span style='background-color: yellow;'>FIXME</span> -->
                an index of open source repositories for your footprints.</p>
                <p>Or import data associated with your account on another 
                network.</p>
                </li>
            </ol>
        </div>
    </div>

    <div class='body contains-submodules'>
        <h4>Import contributions</h4>
        <form id='importer' class='submodule' name='import' method='POST'
            action='{% url mysite.profile.views.prepare_data_import_attempts_do %}'>
            <div class='body'>
                <div class='howto'>
                    <h5>Please enter the usernames or email addresses you use to
                        contribute to FLOSS:</h5>
                    <p>
                    We'll use this to gather information about your activity and involvement in
                    various projects by searching an index of code repositories.
                    <a href="javascript:alert('Just kidding. Not yet implemented.');">Read more
                        about how this works.</a>
                    You can add links to your activity by hand; just click 'Add another record.'
                    </p>
                </div>
            </div>
            <div class='foot'>
                <input type='submit' value='Submit' id='submit_data_sources' />
                <div id='progressbar'></div>
            </div>
        </form>

        <h4>Contributions (#) &mdash; <a id='add_pf_entry' href='#'>Add one</a></h4>
        <div style='width: 800px;' id="portfolio_entries">
            <!-- empty; filled in by JavaScript -->
        </div>
    </div>
</div>

<div style="display: none;">
    <div id="portfolio_entry_building_block">
        {% include 'profile/editor/portfolio_entry_element.html' %}
    </div>
    <div id="add_a_portfolio_entry_building_block">
        {% with 1 as adding_mode %}
        {% include 'profile/editor/portfolio_entry_element.html' %}
        {% endwith %}
    </div>
    <div id="citation_building_block">
        {% include 'profile/editor/citation_element.html' %}
    </div>
    <div id="citation_form_building_block">
        {% include 'profile/editor/citation_form.html' %}
    </div>
</div>

{% endwith %}


{% endblock main %}

{% block js %}
<script type='text/javascript' src='/static/js/jquery.json.js'></script>
<script type='text/javascript' src='/static/js/jquery.jeditable.js'></script>
<script type='text/javascript' src='/static/js/jquery.hint.js'></script>
<script type='text/javascript' src='/static/js/jquery.form.js'></script>
<script type='text/javascript' src='/static/js/jquery.jgrowl.js'></script>
<script type="text/javascript" src="/static/js/jquery-ui-1.7.2.custom.min.js"></script>
<script type="text/javascript">
    $(function() { $("#progressbar").progressbar(); });
</script>


{% if test_js %}<script type='text/javascript'>testJS = true;</script>{% endif %}

<script type='text/javascript' src='/static/js/importer.js'></script>
{% endblock js %}

{% block js_tests %}
<script type='text/javascript' src='/static/js/qunit.js'></script>
<script type='text/javascript' src='/static/js/profile/editor/tests.js'></script>
{% endblock js_tests %}
