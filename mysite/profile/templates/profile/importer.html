{% extends 'base/one_column.html' %}

{% block title %}
Manage projects
{% endblock title %}

{% block body_id %}profile{% endblock %}

{% block main %}
{% with 1 as edit_mode %}
<div id='portfolio' class='module editor'>
    <div class='head'>
        <h3>Manage projects</h3>
        <ul>
            <li>
            <a href='{% url mysite.profile.views.display_person_web person.user.username %}'>
                &laquo; Back to profile
            </a>
            </li>
        </ul>
    </div>
    <div class='howto submodule' style='display: none;'>
        <div class='head'>
            <h3>
                How to use this
                <a class='hide-link' href='#'>Hide this</a>
            </h3>
        </div>
        <div class='body'>
            <ol>
                <li class='handle'>
                <h4>What's your handle?</h4>
                Enter some usernames and
                email addresses you've used
                in free software / open source.
                </li>
                <li class='hangout'>
                <h4>Where do you hang out?</h4>
                <p>Specify where you've used the username/email.</p>
                <p>&ldquo;All repositories&rdquo; &rarr; Automatically
                scan <!-- <span style='background-color: yellow;'>FIXME</span> -->
                an index of open source repositories for your footprints.</p>
                <p>Or import data associated with your account on another 
                network.</p>
                </li>
            </ol>
        </div>
    </div>

    <div class='body contains-submodules'>
        <style>.apologies p {margin-top: 0; }</style>
        <div class='apologies' style='font-size: 17pt; padding: 20px 115px; width: 670px; float: left; text-align: center;'>
            <p>Hi! Here you can document your involvement with free/open source projects.
                Be proud of everything! Add your bug reports, translations,
                patches, and code commits.
            </p>
            
            <p style='font-size: 11pt;'>(To find things to do in the free/open source
            community, check out the
            <a href='{% url mysite.search.views.fetch_bugs %}'>
                volunteer opportunity finder</a>.)
            </p></div>
        <h4>Import links</h4>
        <form id='importer' class='submodule' name='import' method='POST'
            action='{% url mysite.profile.views.prepare_data_import_attempts_do %}'>
            <div class='body'>
                <div class='howto'>
                    <h5><a style='position: relative; top: -10px;' href='#'>Find my projects and links automatically</a></h5>
                    <p style='margin-top: 60px;'>
                    Please enter the usernames or email addresses you use to contribute to FLOSS.
                    We'll find links to your activity and involvement in
                    various projects.
                    <a target="_blank" href="http://openhatch.org/blog/about-the-project-importer/">
                        How does it work?</a>
                    </p>
                    <p>
                    <a href='mailto:suggestions@openhatch.org?subject=Suggested%20data%20source'>
                        Suggest a data source</a>
                    </p>
                </div>
                <div id='importer-form-footer'>
                    <input type='submit' value='Submit' id='submit_data_sources' />
                    <div id='progressbar'></div>
                </div>
            </div>
        </form>

        <h4>
            Projects
            &middot; <a id='add_pf_entry' href='#'>Add a project</a>
            &middot; <a id='reorder_projects' href='#'>Re-order projects</a>
            <a style='display: none;' id='done_reordering' href='#'>Click when you're done re-ordering</a>
        </h4>
        <div style='width: 920px;' id="portfolio_entries">
            <div class='loading_message' style='width: 100%; float: left; text-align: center;'>Loading...</div>
            <!-- JavaScript will swoop in and replace this with useful stuff. -->
        </div>
        <button id='save_all_projects'>Save all projects</button>
        <a style='padding: 5px; margin-right: 30px; float: right;'
            href='{% url mysite.profile.views.display_person_web person.user.username %}'>
            &laquo; Back to profile
        </a>
    </div>
</div>

<div style="display: none;">
    <div id="portfolio_entry_building_block">
        {% include 'profile/portfolio/portfolio_entry_element.html' %}
    </div>
    <div id="add_a_portfolio_entry_building_block">
        {% with 1 as adding_mode %}
        {% include 'profile/portfolio/portfolio_entry_element.html' %}
        {% endwith %}
    </div>
    <div id="citation_building_block">
        {% include 'profile/portfolio/citation_element.html' %}
    </div>
    <div id="citation_form_building_block">
        {% include 'profile/portfolio/citation_form.html' %}
    </div>
</div>

{% endwith %}


{% endblock main %}

{% block js_before_bundle %}
<script type="text/javascript">
var want_importer = true;
</script>
{% endblock js_before_bundle %}

{% block js %}
<script type="text/javascript">
    $(function() {
        $("#progressbar").progressbar(); 
    });
</script>


{% if test_js %}<script type='text/javascript'>testJS = true;</script>{% endif %}
{% endblock js %}

{% block js_tests %}
<script type='text/javascript' src='/static/js/tester.js'></script>
<script type='text/javascript' src='/static/js/profile/editor/tests.js'></script>
{% endblock js_tests %}
