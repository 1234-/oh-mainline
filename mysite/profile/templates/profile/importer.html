{% extends 'base/one_column.html' %}

{% block title %}
Portfolio editor
{% endblock title %}

{% block css %}
{{ block.super }}
@import url('/static/css/profile/editor.css');
@import url('/static/css/qunit.css');
@import url('/static/css/base/jquery.jgrowl.css');
@import url('/static/css/jquery-ui-lightness/jquery-ui-1.7.2.custom.css');
{% endblock css %}

{% block main %}
{% with 1 as edit_mode %}
<div id='portfolio' class='module editor'>
    <div class='head'>
        <h3>Portfolio editor</h3>
        <ul>
            <li>
            <a href='/people/{{ the_user.username }}'>
                &laquo; Back to portfolio
            </a>
            </li>
        </ul>
    </div>
    <div class='howto submodule' style='display: none;'>
        <div class='head'>
            <h3>
                How to use this
                <a class='hide-link' href='#'>Hide this</a>
            </h3>
        </div>
        <div class='body'>
            <ol>
                <li class='handle'>
                <h4>What's your handle?</h4>
                Enter some usernames and
                email addresses you've used
                in free software / open source.
                </li>
                <li class='hangout'>
                <h4>Where do you hang out?</h4>
                <p>Specify where you've used the username/email.</p>
                <p>&ldquo;All repositories&rdquo; &rarr; Automatically
                scan <!-- <span style='background-color: yellow;'>FIXME</span> -->
                an index of open source repositories for your footprints.</p>
                <p>Or import data associated with your account on another 
                network.</p>
                </li>
            </ol>
        </div>
    </div>

    <div class='body contains-submodules'>
        <style>.apologies p {margin-top: 0; }</style>
        <div class='apologies' style='font-size: 15pt; padding: 20px 140px; width: 620px; float: left; text-align: center;'><p>Hi! This is the Portfolio Editor, where you can document your involvement with open source projects. Be proud of everything! From bug reports and translations to patches and commits to code repositories.</p><p style='font-size: 11pt;'>To find things to do in the open source community, use our <a href='/search/'>volunteer opportunity search engine.</a></p></div>
        <h4>Import links</h4>
        <form id='importer' style='overflow: hidden; height: 40px;' class='submodule' name='import' method='POST'
            action='{% url mysite.profile.views.prepare_data_import_attempts_do %}'>
            <div class='body'>
                <div class='howto'>
                    <h5><a href='#' onclick="$('#importer').css('height', 'auto'); return false;">Find my involvement automatically</a></h5>
                    <p style='margin-top: 60px;'>
                    Please enter the usernames or email addresses you use to contribute to FLOSS.
                    We'll find links to your activity and involvement in
                    various projects.
                    <a href="javascript:alert('Just kidding. Not yet implemented.');">
                        How does it work?</a>
                    </p>
                    <p>
                    <a href='mailto:suggestions@openhatch.org?subject=Suggested%20data%20source'>
                        Suggest a data source</a>
                    </p>
                </div>
            </div>
            <div class='foot'>
                <input type='submit' value='Submit' id='submit_data_sources' />
                <div id='progressbar'></div>
            </div>
        </form>

        <h4>Projects (none yet) &mdash; <a id='add_pf_entry' href='#'>Add a project manually</a></h4>
        <div style='width: 920px;' id="portfolio_entries">
            <div class='loading_message' style='width: 100%; float: left; text-align: center;'>Loading...</div>
            <!-- JavaScript will swoop in and replace this with useful stuff. -->
        </div>
    </div>
</div>

<div style="display: none;">
    <div id="portfolio_entry_building_block">
        {% include 'profile/editor/portfolio_entry_element.html' %}
    </div>
    <div id="add_a_portfolio_entry_building_block">
        {% with 1 as adding_mode %}
        {% include 'profile/editor/portfolio_entry_element.html' %}
        {% endwith %}
    </div>
    <div id="citation_building_block">
        {% include 'profile/editor/citation_element.html' %}
    </div>
    <div id="citation_form_building_block">
        {% include 'profile/editor/citation_form.html' %}
    </div>
</div>

{% endwith %}


{% endblock main %}

{% block js %}
<script type='text/javascript' src='/static/js/jquery.json.js'></script>
<script type='text/javascript' src='/static/js/jquery.jeditable.js'></script>
<script type='text/javascript' src='/static/js/jquery.hint.js'></script>
<script type='text/javascript' src='/static/js/jquery.form.js'></script>
<script type='text/javascript' src='/static/js/jquery.jgrowl.js'></script>
<script type="text/javascript" src="/static/js/jquery-ui-1.7.2.custom.min.js"></script>
<script type="text/javascript">
    $(function() { $("#progressbar").progressbar(); });
</script>


{% if test_js %}<script type='text/javascript'>testJS = true;</script>{% endif %}

<script type='text/javascript' src='/static/js/importer.js'></script>
{% endblock js %}

{% block js_tests %}
<script type='text/javascript' src='/static/js/qunit.js'></script>
<script type='text/javascript' src='/static/js/profile/editor/tests.js'></script>
{% endblock js_tests %}
