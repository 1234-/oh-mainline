{% load profile_extras %}
{# Used, at time of writing, in profile/map.html and profile/search_people.html #}
<li id="person_summary_{{person.pk}}">
    {% ifnotequal slug "people" %}<a href="{{ person.profile_url }}">{% endifnotequal %}
    <div class='left'>
        <img src="{{ person.get_photo_thumbnail_url_or_default }}" />
    </div>
    <div class="people-view-info">
        {% ifequal slug "people" %}
        <a class='profile-link person-summary-button' href='{{ person.profile_url }}' 
                title="Visit {% firstof person.user.first_name person.user.username %}'s profile">
            profile
        </a>{% endifequal %}

        <div class="name">

            {% if person.user.first_name or person.user.last_name %}
                {{ person.user.first_name }} {{ person.user.last_name }}
            {% else %}
                {{ person.user.username }}
            {% endif %}

            {% if person.user.first_name and person.user.last_name %}
                <span class='username'>
                    {{ person.user.username }}
                </span>
            {% endif %}
        </div>

	{% if q %}
        <div class="what_matched_the_search">
          {{ person.reasons|join:" and " }} {{ q }}
        </div>
	{% endif %}

        {% if person.location_display_name and person.location_confirmed %}
        <div class="location">
            {{ person.location_display_name }}
        </div>
        {% endif %}
        {% with person.get_list_of_project_names as project_names %}
        {% if project_names %}
            <span class="people-view-projects">
                projects: {{ project_names|join:", "}}
            </span>
        {% endif %}
    {% endwith %}
    {% with person.get_tag_texts_for_map as tags %}
        {% if tags %}
            <span class="people-view-tags">
                tags: {{ tags|join:", "}}
            </span>
        {% endif %}
    {% endwith %}
    </div>
    {% ifnotequal slug "people" %}</a>{% endifnotequal %}
</li>
{# vim: set filetype=htmldjango: #}
