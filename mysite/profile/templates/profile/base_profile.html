{% extends 'profile/base_two_column.html' %}

{% block pagetop %}
    <div id='nameplate'>
    {% if name_edit_mode %}
        <form method='POST'
            name='edit_name'
            action='/edit/name/do'>
            <h3>What d'you go by?</h3>
            <div class='section'>
                <h4>First name:</h4>
                <input type='text' name='first_name'
                value='{{ person.user.first_name }}' />
            </div>
            <div class='section'>
                <h4>Last name:</h4>
                <input type='text' name='last_name'
                value='{{ person.user.last_name }}' />
            </div>
            <div class='section'>
                <input class='save-button' type='submit' value='Save' /></td></tr>
            </div>
            </table>
        </form>
    {% else %}
            {% if person.user.first_name or person.user.last_name %}
            <h1 class='name'>
                <a href='/people/{{ person.user.username }}'>
                    {{ person.user.first_name }}
                    {{ person.user.last_name }}
                </a>
            </h1>
            {% if editable %}
            <a href='/edit/name'>
                <img src='/static/images/icons/pencil.png'
                alt='Edit name' />
            </a>
            {% endif %}
            {% else %}
            <a href='/people/{{ person.user.username }}'>
                <div class='name'>
                    {{ person.user.username }}
                </div>
            </a>
            {% endif %}

	    {% if person.user.first_name or person.user.last_name or person.show_email %}
            <small class='usernames'>
                <span class='aka'>
                    a.k.a.
                </span>
	    </small>
		<ul>
		  {% if person.user.first_name or person.user.last_name %}
		  <li>
		    <small class='usernames'>
		      {{ person.user.username }}
		    </small>
		  </li>
		  {% endif %}

		  {% if person.show_email %}
		  <li>
		    <small class='usernames'>
		      {{ the_user.email }}
		    </small>
		  </li>
		  {% endif %}
		  {% endif %}
        <div>
            {% if editable and not person.user.first_name and not person.user.last_name %}
            <div id='edit_your_name_notification' 
                class='notification'>Tell us your name!</div>
            {% endif %}
        </div>
    {% endif %}
    </div>

{% endblock pagetop %}

{% block left %}
{% if edit_mode %}
<div id='avatar' class='edit module'>
    <a href='/people/{{ person.user.username }}/photos/default/set'>
        This space reserved for doodling or
        other visual jiggerypokery.
    </a>
</div>
{% else %}
    <div><a href="/account/edit/photo/">Change photo</a></div>
<div id='avatar' class='module'><img src='{{ photo_url }}' /></div>
{% endif %}

<div id='info' class='module'>

    {% if editable and not info_edit_mode %}
    <a class='edit' href='/people/edit/info'>Edit</a>
    {% endif %}

    <h3 style='float: left; width: 100px;'>Info</h3>

    {% if editable and not info_edit_mode and not has_set_info %}
    <div id='edit_your_info_notification' class='notification'>Edit your info!</div>
    {% endif %}

    {% if info_edit_mode %}
    <form name='edit-tags'
        action='/people/info/edit/do'
        method='POST'>
        <!-- personal_info_edit_mode -->
        {% comment %} THIS HURR IS EDIT MODE {% endcomment %}
        <h4>(eg. c++, lambda calculus, juggling)</h4>
        <h4>understands:</h4>
        <textarea name='edit-tags-understands'>{{ tags_flat.understands }}</textarea>
        <h4>will never understand:</h4>
        <textarea name='edit-tags-understands_not'>{{ tags_flat.understands_not }}</textarea>
        <h4>looking for volunteering opportunities tagged with:</h4>
        <textarea name='edit-tags-seeking'>{{ tags_flat.seeking }}</textarea>
        <h4>currently studying:</h4>
        <textarea name='edit-tags-studying'>{{ tags_flat.studying }}</textarea>
        <h4>can mentor in:</h4>
        <textarea name='edit-tags-can_mentor'>{{ tags_flat.can_mentor }}</textarea>
        <input class='save-button' type='submit' value='Save' />
    </form>
    {% else %}
    <!-- {{{ -->
    {% if tags_flat.understands %}
    <div class='tags' id='tags-understands'>
        <span class='tag-type'>understands:</span> {{ tags_flat.understands }}
    </div>
    {% endif %}
    {% if tags.understands_not %}
    <div class='tags' id='tags-understands_not'>
        <span class='tag-type'>will never understand:</span> {{ tags_flat.understands_not }}
    </div>
    {% endif %}
    {% if tags.seeking %}
    <div class='tags' id='tags-seeking'>
        <span class='tag-type'>looking for volunteering opportunities in:</span> {{ tags_flat.seeking }}
    </div>
    {% endif %}
    {% if tags.studying %}
    <div class='tags' id='tags-studying'>
        <span class='tag-type'>currently learning about:</span> {{ tags_flat.studying }}
    </div>
    {% endif %}
    {% if tags.can_mentor %}
    <div class='tags' id='tags-can_mentor'>
        <span class='tag-type'>can mentor in:</span> {{ tags_flat.can_mentor }}
    </div>
    {% endif %}
    <!-- }}} -->
    {% endif %}
</div>
{% endblock left %}

{% comment %}
vim: set ai et ts=4 sw=4 nu:
{% endcomment %}
