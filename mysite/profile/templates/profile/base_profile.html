{% extends 'base/two_columns.html' %}
{% load profile_extras %}

{% block body_id %}profile{% endblock %}

{% block description_for_anonymous_users %}
    <strong>
        Learn below
    </strong>
    how
    {% firstof person.user.first_name person.user.username %}
    is involved in FOSS.
{% endblock %}

{% block pagetop %}

    <div id='nameplate'>
    {% if name_edit_mode %}
        <form method='POST'
            name='edit_name'
            action='/edit/name/do'>
            <div class='head'>
                <h3>What d'you go by?</h3>
            </div>
            <div class='body'>
            <div class='section'>
                <h4>First name:</h4>
                <input type='text' name='first_name'
                value='{{ person.user.first_name }}' />
            </div>
            <div class='section'>
                <h4>Last name:</h4>
                <input type='text' name='last_name'
                value='{{ person.user.last_name }}' />
            </div>
            <div class='section'>
                <input class='save-button' type='submit' value='Save' />
            </div>
            </div>
            </table>
        </form>
    {% else %}
            {% if person.user.first_name or person.user.last_name %}
            <h1 class='name'>
                <a href='/people/{{ person.user.username }}'>
                    {{ person.user.first_name }}
                    {{ person.user.last_name }}
                </a>
            </h1>
            {% else %}
            <h1 class='name'>
            <a href='/people/{{ person.user.username }}'>
                <div class='name'>
                    {{ person.user.username }}
                </div>
            </a>
            </h1>


            {% if editable %}
            <a class='name-edit-link' href='/edit/name'>
                <img src='/static/images/icons/pencil.png'
                alt='Edit name' />
            </a>
            <div id='edit_your_name_notification' 
                class='notification'>&laquo; Tell us your name!</div>
            {% endif %}
            {% endif %}

	    <div style="clear: left; float: left;">
	      {% if person.location_display_name and person.location_confirmed %}
	      {{ person.location_display_name }}
	      {% endif %}
              {% if editable %}
	      <a href="{% url mysite.account.views.set_location %}">(edit location)</a>
              {% endif %}

	      {% if person.show_email and person.user.email %}
              <div>
		<a href="mailto:{{ person.user.email }}">{{ person.user.email }}</a>
              </div>
	      {% endif %}
	      
	    </div>
			

    {% endif %}
    </div>

{% endblock pagetop %}

{% block left %}
<div id='avatar' class='module'>
    <img src='{{ photo_url }}' />
    {% if editable %}
    <div class='change-photo-link'><a href="/account/edit/photo/">Change photo</a></div>
    {% endif %}
</div>

<div id='info' class='module'>

    <div class='head'>
        {% if editable and not info_edit_mode %}
        <ul>
            <li><a class='edit' href='{% url mysite.profile.views.edit_info %}'>Edit</a></li>
        </ul>
        {% endif %}

        <h3>Info</h3>

    </div>

    <div class='body'>
<style>
    h4 { padding: 0;}
</style>
        {% if not person.bio and not person.homepage_url %}
        {% ifequal the_user.get_profile person %}
        <div class='notification' style='width: '>
            <strong style="font-size: 1.2em; display: block; width: 100%;"><a href='{% url mysite.profile.views.edit_info %}'>Tell us about you &raquo;</a></strong>
        </div>
        {% endifequal %}
        {% endif %}

        {% if person.bio %}
        <h4>bio</h4>
        <p id="bio" style='clear: both;'>
            {{person.bio}}
        </p>
        {% endif %}

        {% if person.homepage_url %}
        <h4>web site</h4>
        <a href="{{ person.homepage_url }}">{{ person.homepage_url|break_long_words|safe }}</a>
        {% endif %}

        {% comment %} 
        <div class="tags" id="tags-links"
            <span class="tag-type">links:</span>
            <ul>
                <li> <a href="#">My website</a> </li>
                <li> <a href="#">My Facebook</a> </li>
                <li> <a href="#">indenti.ca</a> </li>
                <li> <a href="#">openhatch</a> </li>
            </ul>
        </div>
        {% endcomment %} 
    </div>
</div>
<div id='info' class='module'>
    <div class='head'>
        {% if editable and not info_edit_mode %}
        <ul>
            <li><a class='edit' href='{% url mysite.profile.views.edit_info %}'>Edit</a></li>
        </ul>
        {% endif %}

        <h3>Tags</h3>

    </div>
    <div class='body'>
        {% if not tags_flat %}
        {% ifequal the_user.get_profile person %}
        <div class='notification' style='width: '>
            <strong style="font-size: 1.2em; display: block; width: 100%;"><a href='{% url mysite.profile.views.edit_info %}'>Add Tags &raquo;</a></strong>
            <p class="little">
            Tags help us connect you to people with similar interests.
            </p>
        </div>
        {% endifequal %}
        {% endif %}

        {% if tags.understands and tags_flat.understands %}
        <div class='tags' id='tags-understands'>
            <h4>understands</h4>

            {% for thingamabob in tags.understands %}
            <a href="{% url mysite.profile.views.display_list_of_people_who_match_some_search "understands" thingamabob.text|urlencode %}">{{ thingamabob.text }}</a>{% if not forloop.last %}, {% endif %}
            {% endfor %}
        </div>
        {% endif %}
        {% if tags.understands_not and tags_flat.understands_not %}
        <div class='tags' id='tags-understands_not'>
            <h4>will never understand</h4>
            {% for thingamabob in tags.understands_not %}
            <a href="{% url mysite.profile.views.display_list_of_people_who_match_some_search "understands_not" thingamabob.text|urlencode %}">{{ thingamabob.text }}</a>{% if not forloop.last %}, {% endif %}
            {% endfor %}
        </div>
        {% endif %}
        {% if tags.seeking and tags_flat.seeking %}
        <div class='tags' id='tags-seeking'>
            <h4>can pitch in with</h4>
            {% for thingamabob in tags.seeking %}
            <a href="{% url mysite.profile.views.display_list_of_people_who_match_some_search "seeking" thingamabob.text|urlencode %}">{{ thingamabob.text }}</a>{% if not forloop.last %}, {% endif %}
            {% endfor %}
        </div>
        {% endif %}
        {% if tags.studying and tags_flat.studying %}
        <div class='tags' id='tags-studying'>
            <h4>currently studying</h4>
            {% for thingamabob in tags.studying %}
            <a href="{% url mysite.profile.views.display_list_of_people_who_match_some_search "studying" thingamabob.text|urlencode %}">{{ thingamabob.text }}</a>{% if not forloop.last %}, {% endif %}
            {% endfor %}
        </div>
        {% endif %}
        {% if tags.can_mentor and tags_flat.can_mentor %}
        <div class='tags' id='tags-can_mentor'>
            <h4>can mentor in</h4>
            {% for thingamabob in tags.can_mentor %}
            <a href="{% url mysite.profile.views.display_list_of_people_who_match_some_search "can_mentor" thingamabob.text|urlencode %}">{{ thingamabob.text }}</a>{% if not forloop.last %}, {% endif %}
            {% endfor %}
        </div>
        {% endif %}

{# vim: set filetype=htmldjango: #}
    </div>
</div>
{% endblock left %}

{% comment %}
vim: set ai et ts=4 sw=4 nu:
{% endcomment %}
